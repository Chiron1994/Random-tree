%macro Bootstraped_Tree(lib,file,varnum,rep);
proc contents data=&lib..&file.  
out=work.vars(keep=name type) noprint;
run;
data work.vars;
set work.vars;
rename name = variable_name;
if type = 1;   /* Numeric variables only */;
vote_count = 0;
run;
data work.var_votes;
set work.vars;
if _n_ < 1;
keep variable_name; 
run;
%do i = 
1
%to &rep.;
data work.var_list;
set work.vars;
random = ranuni(
0
);
run;
proc sort data=work.var_list;
by random;
run;
data work.test_list;
set work.var_list (obs=&varnum. keep=variable_name);
run;
data _null_;
length allvars $
1000
;
retain allvars ' ';
set work.test_list end=eof;
allvars = trim(left(allvars))||' '||left(variable_name);
if eof then call symput('varlist', allvars);
run;
%put &varlist; 
proc fastclus data=&lib.
.
&file. maxclusters=
2
outstat=work.cluster_stat noprint;
var &varlist;
run; 
data work.rsq;
set work.cluster_stat;
if _type_ = 'RSQ';
drop _type_ cluster over_all;
run;  
proc transpose data=work.rsq out=work.rsq2;
run; 
data work.rsq2;
set work.rsq2;
length 
variable_name $32.;
variable_name = _name_;
run;
proc sort data=work.rsq2;
by descending col1;
run;
data work.var_votes;
set work.var_votes work.rsq2(obs=
1
);
run;
%end;
%mend Bootstraped_Tree;
